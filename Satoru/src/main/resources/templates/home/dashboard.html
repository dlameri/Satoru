<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" lang="pt-br">
<body>
	<div class="wrapper wrapper-content" th:fragment="content">
		<div class="row">
			<div class="col-lg-12">
				<div class="ibox float-e-margins">
					<div class="ibox-content">
						<div>
							<span class="pull-right text-right"> 
								<small>Comparativo entre os estudos feitas com sucesso e sem sucesso</small>								
							</span>
							<h1 class="m-b-xs" th:text="${totalStudies}">Total</h1>
							<h3 class="font-bold no-margins">Estudos feitos</h3>
						</div>

						<div>
							<canvas id="studyChart" height="70"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<div class="ibox float-e-margins">
					<div class="ibox-content">
						<div>
							<span class="pull-right text-right"> 
								<small>Comparativo entre as revisões feitas com sucesso e sem sucesso</small>								
							</span>
							<h1 class="m-b-xs" th:text="${totalReviews}">Total</h1>
							<h3 class="font-bold no-margins">Revisões feitas</h3>
						</div>

						<div>
							<canvas id="reviewChart" height="70"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script th:fragment="customJS" th:inline="javascript">
		var studySuccess = [];
		var studyErrors = [];
		var reviewSuccess = [];
		var reviewErrors = [];
		
		/*<![CDATA[*/

	    var modelList = [[${models}]]
	    for (i = 0; i < modelList.length; i++) {	    	
	    	studySuccess.push(modelList[i].studySuccess);
	    	studyErrors.push(modelList[i].studyErrors);
	    	reviewSuccess.push(modelList[i].reviewSuccess);
	    	reviewErrors.push(modelList[i].reviewErrors);
	    }

	    /*]]>*/
	
		function last7Days() {
		    return '6543210'.split('').map(function(n) {
		        var d = new Date();
		        d.setDate(d.getDate() - n);
		        
		        return ("0" + d.getDate()).slice(-2) + "/" + ("0" + (d.getMonth() + 1)).slice(-2);
		    });
		}
		$(document).ready(
						function() {
							setActive(["home"]);

							var reviewData = {
								labels : last7Days(),
								datasets : [
										{
											label : "Erros na revisão",
											fillColor : "rgba(220,220,220,0.5)",
											strokeColor : "rgba(220,220,220,1)",
											pointColor : "rgba(220,220,220,1)",
											pointStrokeColor : "#fff",
											pointHighlightFill : "#fff",
											pointHighlightStroke : "rgba(220,220,220,1)",
											data : reviewErrors
										},
										{
											label : "Acertos na revisão",
											fillColor : "rgba(26,179,148,0.5)",
											strokeColor : "rgba(26,179,148,0.7)",
											pointColor : "rgba(26,179,148,1)",
											pointStrokeColor : "#fff",
											pointHighlightFill : "#fff",
											pointHighlightStroke : "rgba(26,179,148,1)",
											data : reviewSuccess
										} ]
							};
							
							var studyData = {
									labels : last7Days(),
									datasets : [
											{
												label : "Erros na revisão",
												fillColor : "rgba(220,220,220,0.5)",
												strokeColor : "rgba(220,220,220,1)",
												pointColor : "rgba(220,220,220,1)",
												pointStrokeColor : "#fff",
												pointHighlightFill : "#fff",
												pointHighlightStroke : "rgba(220,220,220,1)",
												data : studyErrors
											},
											{
												label : "Acertos na revisão",
												fillColor : "rgba(26,179,148,0.5)",
												strokeColor : "rgba(26,179,148,0.7)",
												pointColor : "rgba(26,179,148,1)",
												pointStrokeColor : "#fff",
												pointHighlightFill : "#fff",
												pointHighlightStroke : "rgba(26,179,148,1)",
												data : studySuccess
											} ]
								};

							var lineOptions = {
								scaleShowGridLines : true,
								scaleGridLineColor : "rgba(0,0,0,.05)",
								scaleGridLineWidth : 1,
								bezierCurve : true,
								bezierCurveTension : 0.4,
								pointDot : true,
								pointDotRadius : 4,
								pointDotStrokeWidth : 1,
								pointHitDetectionRadius : 20,
								datasetStroke : true,
								datasetStrokeWidth : 2,
								datasetFill : true,
								responsive : true,
							};

							var ctxReview = document.getElementById("reviewChart").getContext("2d");
							new Chart(ctxReview).Line(reviewData,lineOptions);
							
							var ctxStudy = document.getElementById("studyChart").getContext("2d");
							new Chart(ctxStudy).Line(studyData,lineOptions);

						});
	</script>
</body>
</html>

